{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jaina\\\\OneDrive\\\\Desktop\\\\Sweet-Shop-Mangement-System\\\\sweet-shop-frontend\\\\src\\\\components\\\\Admin\\\\CreateSweetForm.tsx\",\n  _s = $RefreshSig$();\n// src/components/Admin/CreateSweetForm.tsx (UPDATED)\n\nimport React, { useState } from 'react';\nimport api from '../../api/index.ts';\n\n// Add the interface for the props\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateSweetForm = ({\n  onSweetCreated\n}) => {\n  _s();\n  // ... (rest of the state declarations)\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [description, setDescription] = useState('');\n  const [error, setError] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const handleSubmit = async e => {\n    // ... (existing validation and setup)\n\n    try {\n      // ... (API call logic)\n      const sweetData = {\n        name,\n        price: sweetPrice,\n        description\n        // Add default values for backend requirements if needed (e.g., category: 'General')\n      };\n      const response = await api.post('/sweets/', sweetData);\n      setSuccessMessage(`Sweet \"${response.data.name}\" added successfully!`);\n\n      // Clear the form fields after successful creation\n      setName('');\n      setPrice('');\n      setDescription('');\n\n      // --- CRITICAL CHANGE: Call the refresh function ---\n      onSweetCreated();\n    } catch (err) {\n      // ... (existing error handling)\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ... (rest of the return statement)\n  // (The form JSX remains the same)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card shadow mb-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateSweetForm, \"QZJLo3Ar7UMw1/B2/irhZVwQIDs=\");\n_c = CreateSweetForm;\nexport default CreateSweetForm;\nvar _c;\n$RefreshReg$(_c, \"CreateSweetForm\");","map":{"version":3,"names":["React","useState","api","jsxDEV","_jsxDEV","CreateSweetForm","onSweetCreated","_s","name","setName","price","setPrice","description","setDescription","error","setError","successMessage","setSuccessMessage","loading","setLoading","handleSubmit","e","sweetData","sweetPrice","response","post","data","err","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/jaina/OneDrive/Desktop/Sweet-Shop-Mangement-System/sweet-shop-frontend/src/components/Admin/CreateSweetForm.tsx"],"sourcesContent":["// src/components/Admin/CreateSweetForm.tsx (UPDATED)\r\n\r\nimport React, { useState } from 'react';\r\nimport api from '../../api/index.ts';\r\nimport { Sweet } from '../../types/Sweet.ts';\r\n\r\n// Add the interface for the props\r\ninterface CreateSweetFormProps {\r\n    onSweetCreated: () => void; // Function passed from Dashboard to refresh the list\r\n}\r\n\r\nconst CreateSweetForm: React.FC<CreateSweetFormProps> = ({ onSweetCreated }) => {\r\n// ... (rest of the state declarations)\r\n    const [name, setName] = useState('');\r\n    const [price, setPrice] = useState(''); \r\n    const [description, setDescription] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        // ... (existing validation and setup)\r\n\r\n        try {\r\n            // ... (API call logic)\r\n            const sweetData = {\r\n                name,\r\n                price: sweetPrice,\r\n                description,\r\n                // Add default values for backend requirements if needed (e.g., category: 'General')\r\n            };\r\n\r\n            const response = await api.post<Sweet>('/sweets/', sweetData);\r\n            \r\n            setSuccessMessage(`Sweet \"${response.data.name}\" added successfully!`);\r\n            \r\n            // Clear the form fields after successful creation\r\n            setName('');\r\n            setPrice('');\r\n            setDescription('');\r\n\r\n            // --- CRITICAL CHANGE: Call the refresh function ---\r\n            onSweetCreated(); \r\n\r\n        } catch (err: any) {\r\n            // ... (existing error handling)\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // ... (rest of the return statement)\r\n    // (The form JSX remains the same)\r\n    return (\r\n        <div className=\"card shadow mb-4\">\r\n            {/* ... Form JSX ... */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateSweetForm;"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,GAAG,MAAM,oBAAoB;;AAGpC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAKA,MAAMC,eAA+C,GAAGA,CAAC;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EAChF;EACI,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAgB,IAAI,CAAC;EACvD,MAAM,CAACe,cAAc,EAAEC,iBAAiB,CAAC,GAAGhB,QAAQ,CAAgB,IAAI,CAAC;EACzE,MAAM,CAACiB,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMmB,YAAY,GAAG,MAAOC,CAAkB,IAAK;IAC/C;;IAEA,IAAI;MACA;MACA,MAAMC,SAAS,GAAG;QACdd,IAAI;QACJE,KAAK,EAAEa,UAAU;QACjBX;QACA;MACJ,CAAC;MAED,MAAMY,QAAQ,GAAG,MAAMtB,GAAG,CAACuB,IAAI,CAAQ,UAAU,EAAEH,SAAS,CAAC;MAE7DL,iBAAiB,CAAC,UAAUO,QAAQ,CAACE,IAAI,CAAClB,IAAI,uBAAuB,CAAC;;MAEtE;MACAC,OAAO,CAAC,EAAE,CAAC;MACXE,QAAQ,CAAC,EAAE,CAAC;MACZE,cAAc,CAAC,EAAE,CAAC;;MAElB;MACAP,cAAc,CAAC,CAAC;IAEpB,CAAC,CAAC,OAAOqB,GAAQ,EAAE;MACf;IAAA,CACH,SAAS;MACNR,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;;EAED;EACA;EACA,oBACIf,OAAA;IAAKwB,SAAS,EAAC;EAAkB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAE5B,CAAC;AAEd,CAAC;AAACzB,EAAA,CA/CIF,eAA+C;AAAA4B,EAAA,GAA/C5B,eAA+C;AAiDrD,eAAeA,eAAe;AAAC,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}