{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jaina\\\\OneDrive\\\\Desktop\\\\Sweet-Shop-Mangement-System\\\\sweet-shop-frontend\\\\src\\\\components\\\\Auth\\\\RegisterForm.tsx\",\n  _s = $RefreshSig$();\n// src/components/Auth/RegisterForm.tsx\n\nimport React, { useState } from 'react';\nimport useAuth from '../../hooks/useAuth.ts'; // Corrected path\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RegisterForm = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n\n  // Get the register function from the context\n  const {\n    register\n  } = useAuth();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    setSuccessMessage(null);\n    try {\n      // Call the register function provided by AuthContext\n      await register(email, password);\n\n      // Note: AuthContext already calls login and navigates on success, \n      // so this success message and timeout are now redundant but kept for now.\n      setSuccessMessage('Registration successful! Redirecting...');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      // --- FIX APPLIED HERE ---\n      // AuthContext now throws a string, so we must check for that type.\n\n      let errorMessage = 'Registration failed. Please check your network connection.';\n\n      // If the thrown error is a string (from AuthContext, e.g., \"Validation Error: field required\")\n      if (typeof err === 'string') {\n        errorMessage = err;\n      }\n      // Fallback for unexpected structured errors (less likely now)\n      else if ((_err$response = err.response) !== null && _err$response !== void 0 && (_err$response$data = _err$response.data) !== null && _err$response$data !== void 0 && _err$response$data.detail) {\n        errorMessage = err.response.data.detail;\n      }\n      setError(errorMessage);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row justify-content-center mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 col-lg-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header bg-success text-white text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-0\",\n            children: \"Customer Registration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger\",\n            role: \"alert\",\n            children: [\"**Error:** \", error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 29\n          }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-success\",\n            role: \"alert\",\n            children: successMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"emailInput\",\n                className: \"form-label\",\n                children: \"Email address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"form-control\",\n                id: \"emailInput\",\n                value: email,\n                onChange: e => setEmail(e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"passwordInput\",\n                className: \"form-label\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"form-control\",\n                id: \"passwordInput\",\n                value: password,\n                onChange: e => setPassword(e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-success w-100\",\n              children: \"Register\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-footer text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: [\"Already have an account? \", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/login\",\n              children: \"Login here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 54\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n_s(RegisterForm, \"nsoP8XTZRs3QuFDAzyuSJY52cNg=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = RegisterForm;\nexport default RegisterForm;\nvar _c;\n$RefreshReg$(_c, \"RegisterForm\");","map":{"version":3,"names":["React","useState","useAuth","useNavigate","jsxDEV","_jsxDEV","RegisterForm","_s","email","setEmail","password","setPassword","error","setError","successMessage","setSuccessMessage","register","navigate","handleSubmit","e","preventDefault","err","_err$response","_err$response$data","errorMessage","response","data","detail","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","onSubmit","htmlFor","type","id","value","onChange","target","required","href","_c","$RefreshReg$"],"sources":["C:/Users/jaina/OneDrive/Desktop/Sweet-Shop-Mangement-System/sweet-shop-frontend/src/components/Auth/RegisterForm.tsx"],"sourcesContent":["// src/components/Auth/RegisterForm.tsx\r\n\r\nimport React, { useState } from 'react';\r\nimport useAuth from '../../hooks/useAuth.ts'; // Corrected path\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst RegisterForm: React.FC = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n    \r\n    // Get the register function from the context\r\n    const { register } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(null); \r\n        setSuccessMessage(null);\r\n\r\n        try {\r\n            // Call the register function provided by AuthContext\r\n            await register(email, password);\r\n            \r\n            // Note: AuthContext already calls login and navigates on success, \r\n            // so this success message and timeout are now redundant but kept for now.\r\n            setSuccessMessage('Registration successful! Redirecting...');\r\n\r\n        } catch (err: any) {\r\n            // --- FIX APPLIED HERE ---\r\n            // AuthContext now throws a string, so we must check for that type.\r\n            \r\n            let errorMessage = 'Registration failed. Please check your network connection.';\r\n            \r\n            // If the thrown error is a string (from AuthContext, e.g., \"Validation Error: field required\")\r\n            if (typeof err === 'string') {\r\n                errorMessage = err;\r\n            } \r\n            // Fallback for unexpected structured errors (less likely now)\r\n            else if (err.response?.data?.detail) {\r\n                errorMessage = err.response.data.detail;\r\n            }\r\n            \r\n            setError(errorMessage);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"row justify-content-center mt-5\">\r\n            <div className=\"col-md-6 col-lg-4\">\r\n                <div className=\"card shadow-lg\">\r\n                    <div className=\"card-header bg-success text-white text-center\">\r\n                        <h3 className=\"mb-0\">Customer Registration</h3>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        {error && (\r\n                            <div className=\"alert alert-danger\" role=\"alert\">\r\n                                **Error:** {error}\r\n                            </div>\r\n                        )}\r\n                        {successMessage && (\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                {successMessage}\r\n                            </div>\r\n                        )}\r\n                        <form onSubmit={handleSubmit}>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"emailInput\" className=\"form-label\">Email address</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    className=\"form-control\"\r\n                                    id=\"emailInput\"\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"passwordInput\" className=\"form-label\">Password</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    className=\"form-control\"\r\n                                    id=\"passwordInput\"\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <button type=\"submit\" className=\"btn btn-success w-100\">\r\n                                Register\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"card-footer text-center\">\r\n                        <p className=\"mb-0\">\r\n                            Already have an account? <a href=\"/login\">Login here</a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RegisterForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}